let Se;function kn(e,t){Se?Se.set(e,t):t()}function Ke(e){if(Se)return e();Se=new Map;try{e()}finally{Se.forEach(t=>t()),Se=void 0}}function U(e,t){t||(t={});const s=t.equals||Object.is;let n=[],i=e;const r=c=>{if(!s(i,c)){const h=i;i=c,kn(l,()=>{[...n].forEach(([p,b])=>{p(c,h),b&&u(p,!0)})})}};function a(c){const h=typeof c!="object"?{once:c}:c;return{once:h.once||!1,signal:h.signal||!1}}const u=(c,h)=>{const p=a(h),b=n.findIndex(([g,y])=>g===c&&y.once===p.once&&y.signal===p.signal);b>=0&&n.splice(b,1)},l=Object.assign(function(){return $n(l),i},{destroy(){n=[]},set:r,reset(){r(e)},sub(c,h){return n.push([c,a(h)]),()=>u(c,h)},unsub:u,unsubAll(){n=n.filter(c=>c[1].signal)}});return l}const Ee=[];function $n(e){Ee.length&&Ee[Ee.length-1].add(e)}function C(e,t){let s=new Set,n;function i(){return n||(n=U(a(),t))}function r(){i().set(a())}function a(){s.forEach(c=>{c.unsub(r,{signal:!0})});const u=new Set;let l;Ee.push(u);try{l=e()}finally{Ee.pop()}return u.forEach(c=>{c.sub(r,{signal:!0})}),s=u,l}return Object.assign(function(){return i()()},{destroy(){i().destroy()},sub(...u){return i().sub(...u)},unsub(...u){i().unsub(...u)},unsubAll(...u){i().unsubAll(...u)}})}var ot;function yt(e){return{lang:e?.lang??ot?.lang,message:e?.message,abortEarly:e?.abortEarly??ot?.abortEarly,abortPipeEarly:e?.abortPipeEarly??ot?.abortPipeEarly}}var xn;function En(e){return xn?.get(e)}var An;function qn(e){return An?.get(e)}var Tn;function In(e,t){return Tn?.get(e)?.get(t)}function Pn(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function z(e,t,s,n,i){const r=i&&"input"in i?i.input:s.value,a=i?.expected??e.expects??null,u=i?.received??Pn(r),l={kind:e.kind,type:e.type,input:r,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},c=e.kind==="schema",h=i?.message??e.message??In(e.reference,l.lang)??(c?qn(l.lang):null)??n.message??En(l.lang);h!==void 0&&(l.message=typeof h=="function"?h(l):h),c&&(s.typed=!1),s.issues?s.issues.push(l):s.issues=[l]}function Z(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},yt())}}}function bs(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Mn(e,t){const s=[...new Set(e)];return s.length>1?`(${s.join(` ${t} `)})`:s[0]??"never"}var Vn=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Ze(e,t){return{kind:"validation",type:"check",reference:Ze,async:!1,expects:null,requirement:e,message:t,"~run"(s,n){return s.typed&&!this.requirement(s.value)&&z(this,"input",s,n),s}}}function Ct(e){return{kind:"validation",type:"integer",reference:Ct,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,s){return t.typed&&!this.requirement(t.value)&&z(this,"integer",t,s),t}}}function oe(e){return{kind:"transformation",type:"transform",reference:oe,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Rn(e,t,s){return typeof e.fallback=="function"?e.fallback(t,s):e.fallback}function St(e,t,s){return typeof e.default=="function"?e.default(t,s):e.default}function gs(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function vs(e,t){return{kind:"schema",type:"array",reference:vs,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Z(this)},"~run"(s,n){const i=s.value;if(Array.isArray(i)){s.typed=!0,s.value=[];for(let r=0;r<i.length;r++){const a=i[r],u=this.item["~run"]({value:a},n);if(u.issues){const l={type:"array",origin:"value",input:i,key:r,value:a};for(const c of u.issues)c.path?c.path.unshift(l):c.path=[l],s.issues?.push(c);if(s.issues||(s.issues=u.issues),n.abortEarly){s.typed=!1;break}}u.typed||(s.typed=!1),s.value.push(u.value)}}else z(this,"type",s,n);return s}}}function me(e){return{kind:"schema",type:"boolean",reference:me,expects:"boolean",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,s){return typeof t.value=="boolean"?t.typed=!0:z(this,"type",t,s),t}}}function Qe(e){return{kind:"schema",type:"date",reference:Qe,expects:"Date",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,s){return t.value instanceof Date?isNaN(t.value)?z(this,"type",t,s,{received:'"Invalid Date"'}):t.typed=!0:z(this,"type",t,s),t}}}function Ft(e){return{kind:"schema",type:"function",reference:Ft,expects:"Function",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,s){return typeof t.value=="function"?t.typed=!0:z(this,"type",t,s),t}}}function kt(e,t){return{kind:"schema",type:"instance",reference:kt,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Z(this)},"~run"(s,n){return s.value instanceof this.class?s.typed=!0:z(this,"type",s,n),s}}}function G(e,t){return{kind:"schema",type:"loose_object",reference:G,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Z(this)},"~run"(s,n){const i=s.value;if(i&&typeof i=="object"){s.typed=!0,s.value={};for(const r in this.entries){const a=this.entries[r];if(r in i||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=r in i?i[r]:St(a),l=a["~run"]({value:u},n);if(l.issues){const c={type:"object",origin:"value",input:i,key:r,value:u};for(const h of l.issues)h.path?h.path.unshift(c):h.path=[c],s.issues?.push(h);if(s.issues||(s.issues=l.issues),n.abortEarly){s.typed=!1;break}}l.typed||(s.typed=!1),s.value[r]=l.value}else if(a.fallback!==void 0)s.value[r]=Rn(a);else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(z(this,"key",s,n,{input:void 0,expected:`"${r}"`,path:[{type:"object",origin:"key",input:i,key:r,value:i[r]}]}),n.abortEarly))break}if(!s.issues||!n.abortEarly)for(const r in i)bs(i,r)&&!(r in this.entries)&&(s.value[r]=i[r])}else z(this,"type",s,n);return s}}}function Ce(e,t){return{kind:"schema",type:"nullish",reference:Ce,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(s,n){return(s.value===null||s.value===void 0)&&(this.default!==void 0&&(s.value=St(this,s,n)),s.value===null||s.value===void 0)?(s.typed=!0,s):this.wrapped["~run"](s,n)}}}function le(e){return{kind:"schema",type:"number",reference:le,expects:"number",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,s){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:z(this,"type",t,s),t}}}function $(e,t){return{kind:"schema",type:"optional",reference:$,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(s,n){return s.value===void 0&&(this.default!==void 0&&(s.value=St(this,s,n)),s.value===void 0)?(s.typed=!0,s):this.wrapped["~run"](s,n)}}}function $t(e,t,s){return{kind:"schema",type:"record",reference:$t,expects:"Object",async:!1,key:e,value:t,message:s,get"~standard"(){return Z(this)},"~run"(n,i){const r=n.value;if(r&&typeof r=="object"){n.typed=!0,n.value={};for(const a in r)if(bs(r,a)){const u=r[a],l=this.key["~run"]({value:a},i);if(l.issues){const h={type:"object",origin:"key",input:r,key:a,value:u};for(const p of l.issues)p.path=[h],n.issues?.push(p);if(n.issues||(n.issues=l.issues),i.abortEarly){n.typed=!1;break}}const c=this.value["~run"]({value:u},i);if(c.issues){const h={type:"object",origin:"value",input:r,key:a,value:u};for(const p of c.issues)p.path?p.path.unshift(h):p.path=[h],n.issues?.push(p);if(n.issues||(n.issues=c.issues),i.abortEarly){n.typed=!1;break}}(!l.typed||!c.typed)&&(n.typed=!1),l.typed&&(n.value[l.value]=c.value)}}else z(this,"type",n,i);return n}}}function w(e){return{kind:"schema",type:"string",reference:w,expects:"string",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,s){return typeof t.value=="string"?t.typed=!0:z(this,"type",t,s),t}}}function ts(e){let t;if(e)for(const s of e)t?t.push(...s.issues):t=s.issues;return t}function Ye(e,t){return{kind:"schema",type:"union",reference:Ye,expects:Mn(e.map(s=>s.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Z(this)},"~run"(s,n){let i,r,a;for(const u of this.options){const l=u["~run"]({value:s.value},n);if(l.typed)if(l.issues)r?r.push(l):r=[l];else{i=l;break}else a?a.push(l):a=[l]}if(i)return i;if(r){if(r.length===1)return r[0];z(this,"type",s,n,{issues:ts(r)}),s.typed=!0}else{if(a?.length===1)return a[0];z(this,"type",s,n,{issues:ts(a)})}return s}}}function xt(){return{kind:"schema",type:"unknown",reference:xt,expects:"unknown",async:!1,get"~standard"(){return Z(this)},"~run"(e){return e.typed=!0,e}}}function he(e,t,s){const n=e["~run"]({value:t},yt(s));if(n.issues)throw new Vn(n.issues);return n.value}function se(...e){return{...e[0],pipe:e,get"~standard"(){return Z(this)},"~run"(t,s){for(const n of e)if(n.kind!=="metadata"){if(t.issues&&(n.kind==="schema"||n.kind==="transformation")){t.typed=!1;break}(!t.issues||!s.abortEarly&&!s.abortPipeEarly)&&(t=n["~run"](t,s))}return t}}}function pt(e,t,s){const n=e["~run"]({value:t},yt(s));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}var Bn=Object.defineProperty,Ln=(e,t,s)=>t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ss=(e,t,s)=>Ln(e,typeof t!="symbol"?t+"":t,s),jn=Object.defineProperty,On=(e,t,s)=>t in e?jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ft=(e,t,s)=>On(e,typeof t!="symbol"?t+"":t,s);function ws(e){return t=>t instanceof e}function ys(e,t){const s=class extends Error{constructor(...i){const r=typeof t=="function"?t(...i):typeof t=="string"?[t]:t||[];super(...r),this.name=e}};ft(s,"is",ws(s));let n=s;return Object.defineProperty(n,"name",{value:e}),n}function Dn(e,t,s){const n=class extends ys(e,s){constructor(...r){super(...r),ft(this,"data"),this.data=t(...r)}};ft(n,"is",ws(n));let i=n;return Object.defineProperty(i,"name",{value:e}),i}let Un=class extends ys("CancelledError","Promise was canceled"){},Cs=class extends Dn("TimeoutError",t=>({timeout:t}),(t,s)=>[`Timeout reached: ${t}ms`,{cause:s}]){};const Gn=Symbol("resolved");function Wn(e){return{tag:Gn,value:e}}function ns(e,t){return e.reject=t.reject,e.resolve=t.resolve,e}let Et=class dt extends Promise{constructor(t,s){let n,i,r,a;typeof t=="function"?(r=t,a=s||{}):a=t||{};let u,l;const c=()=>!!l,h=()=>!!u;let p={};const b=[],g=()=>{b.forEach(m=>m()),b.splice(0,b.length),p={}},y=new AbortController,S=()=>h()||c();super((m,v)=>{const{abortOnResolve:d=!0,abortOnReject:I=!0}=a;i=F=>{var M,A;S()||(m(F),u=[F],(M=p.resolved)==null||M.forEach(j=>j(F)),(A=p.finalized)==null||A.forEach(j=>j({kind:"resolved",result:F})),g(),d&&y.abort(Wn(F)))},n=F=>{var M,A;S()||(v(F),l=[F],(M=p.rejected)==null||M.forEach(j=>j(F)),(A=p.finalized)==null||A.forEach(j=>j({kind:"rejected",reason:F})),g(),I&&y.abort(F))};const{abortSignal:P}=a;if(P){if(P.aborted)return n(P.reason);const F=()=>{n(P.reason)};P.addEventListener("abort",F,!0),b.push(()=>{P.removeEventListener("abort",F,!0)})}const{timeout:R}=a;if(R){const F=setTimeout(()=>{n(new Cs(R))},R);b.push(()=>{clearTimeout(F)})}try{const F=()=>{},M=r&&r(i,n,{abortSignal:y.signal,get isRejected(){return c()},get isResolved(){return h()},on(A,j){if(u||l){if(A==="finalized"){const ye=u?{kind:"resolved",result:u[0]}:{kind:"rejected",reason:l[0]};j(ye)}else A==="resolved"&&u?j(u[0]):A==="rejected"&&l&&j(l[0]);return F}return p[A]||(p[A]=[]),p[A].push(j),()=>{const ye=p[A]||[],xe=ye.indexOf(j);xe>=0&&ye.splice(xe,1)}},get result(){return u?.[0]},get rejectReason(){return l?.[0]},throwIfRejected(){if(l)throw l[0]}});M instanceof Promise&&M.catch(n)}catch(F){n(F)}}),ss(this,"reject"),ss(this,"resolve"),this.reject=n,this.resolve=i}static fn(t,s){return new dt(async(n,i,r)=>{try{n(await t(r))}catch(a){i(a)}},s)}static resolve(t){return this.fn(()=>t)}static reject(t){return new dt((s,n)=>{n(t)})}cancel(){this.reject(new Un)}catch(t){return this.then(void 0,t)}finally(t){return ns(super.finally(t),this)}then(t,s){return ns(super.then(t,s),this)}};function Ss(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Nn(e){return e.replace(/_([a-z])/g,(t,s)=>`-${s.toLowerCase()}`)}function Fs(e){return`tapps/${e}`}function At(e,t){sessionStorage.setItem(Fs(e),JSON.stringify(t))}function ks(e){const t=sessionStorage.getItem(Fs(e));try{return t?JSON.parse(t):void 0}catch{}}function Xe(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(s=>{s()})}]}function Hn(e,t){t||(t={});const{textColor:s,bgColor:n,shouldLog:i}=t,r=i===void 0?!0:i,a=typeof r=="boolean"?()=>r:r,u=(l,c,...h)=>{if(c||a()){const p="font-weight:bold;padding:0 5px;border-radius:100px",[b,g,y]={log:["#0089c3","white","INFO"],error:["#ff0000F0","white","ERR"],warn:["#D38E15","white","WARN"]}[l];console[l](`%c${y} ${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c %c${e}`,`${p};background-color:${b};color:${g}`,"",`${p};${s?`color:${s};`:""}${n?`background-color:${n}`:""}`,...h)}};return[["log","forceLog"],["warn","forceWarn"],["error","forceError"]].reduce((l,[c,h])=>(l[c]=u.bind(void 0,c,!1),l[h]=u.bind(void 0,c,!0),l),{})}var zn=function(e,t,s){if(arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function $s(e,t,s,n,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return n(s(t(e.apply(this,arguments))))};case 5:return function(){return i(n(s(t(e.apply(this,arguments)))))};case 6:return function(){return r(i(n(s(t(e.apply(this,arguments))))))};case 7:return function(){return a(r(i(n(s(t(e.apply(this,arguments)))))))};case 8:return function(){return u(a(r(i(n(s(t(e.apply(this,arguments))))))))};case 9:return function(){return l(u(a(r(i(n(s(t(e.apply(this,arguments)))))))))}}}function Fe(e,t,s,n,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return u(a(r(i(n(s(t(e)))))));case 9:return l(u(a(r(i(n(s(t(e))))))));default:{for(var c=arguments[0],h=1;h<arguments.length;h++)c=arguments[h](c);return c}}}var xs=function(e,t){var s=typeof e=="number"?function(n){return n.length>=e}:e;return function(){var n=Array.from(arguments);return s(arguments)?t.apply(this,n):function(i){return t.apply(void 0,zn([i],n,!1))}}},Kn=function(e){return e._tag==="Left"},Es=function(e){return{_tag:"Left",left:e}},As=function(e){return{_tag:"Right",right:e}},qs=Es,Ts=As,Is=Kn,Jn=function(e,t){return function(s){return Is(s)?e(s.left):t(s.right)}},qt=Jn;function Zn(e){return $s(Ts,e.of)}function Qn(e){return $s(qs,e.of)}function Yn(e){return function(t,s){return e.chain(t,function(n){return Is(n)?e.of(n):s(n.right)})}}function Xn(e){return function(t,s){return function(n){return e.map(n,qt(t,s))}}}var Ps=function(e,t){return Fe(e,tr(t))},er=function(e,t){return Fe(e,sr(t))},tr=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},sr=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(s){var n=s[0],i=s[1];return n(i)})}}},Tt=function(e){return function(){return Promise.resolve(e)}},nr=xs(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(s){return t(s)()})}}),Ms="Task",rr={URI:Ms,map:Ps},Vs={of:Tt},ir={URI:Ms,map:Ps,of:Tt,ap:er,chain:nr},or=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function u(h){try{c(n.next(h))}catch(p){a(p)}}function l(h){try{c(n.throw(h))}catch(p){a(p)}}function c(h){h.done?r(h.value):i(h.value).then(u,l)}c((n=n.apply(e,[])).next())})},ar=function(e,t){var s={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(h){return l([c,h])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(s=0)),s;)try{if(n=1,i&&(r=c[0]&2?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){s.label=c[1];break}if(c[0]===6&&s.label<r[1]){s.label=r[1],r=c;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(c);break}r[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(h){c=[6,h],i=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ur=Qn(Vs),cr=Zn(Vs),lr=Tt,Rs=Xn(rr),hr=Rs,pr=function(e,t){return function(){return or(void 0,void 0,void 0,function(){var s;return ar(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(As)];case 1:return[2,n.sent()];case 2:return s=n.sent(),[2,Es(t(s))];case 3:return[2]}})})}},fr=xs(2,Yn(ir)),dr=fr;function et(e){const t=s=>{throw s};return typeof e=="function"?Et.resolve(Fe(e,Rs(t,s=>s))()):Fe(e,qt(t,s=>s))}function Y(e){return Object.assign((...t)=>et(e(...t)),e)}const Ae=Object.assign((e,t)=>Fe(pr(()=>new Et((s,n,i)=>e(r=>s(Ts(r)),r=>s(qs(r)),i),t),s=>s),dr(qt(ur,cr))),{fn:(e,t)=>Ae((s,n,i)=>{const r=e(i);Fe(typeof r=="function"?r:lr(r),hr(n,s))()},t)});function _r(e,t,s,n,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return u(a(r(i(n(s(t(e)))))));case 9:return l(u(a(r(i(n(s(t(e))))))));default:{for(var c=arguments[0],h=1;h<arguments.length;h++)c=arguments[h](c);return c}}}var mr=function(e){return e._tag==="Left"},br=function(e){return{_tag:"Left",left:e}},gr=function(e){return{_tag:"Right",right:e}},Bs=br,_e=gr,vr=function(e){return function(t){return wr(t)?t:_e(e(t.right))}},wr=mr,Ls=function(e,t){try{return _e(e())}catch(s){return Bs(t(s))}};function yr(e){const t=s=>{const n={};return new URLSearchParams(s).forEach((i,r)=>{const a=n[r];Array.isArray(a)?a.push(i):a===void 0?n[r]=i:n[r]=[a,i]}),he(e,n)};return se(Ye([w(),kt(URLSearchParams)]),Ze(s=>{try{return t(s),!0}catch{return!1}},"The value doesn't match required schema"),oe(t))}function Cr(e){return se(w(),Ze(t=>{try{return JSON.parse(t),!0}catch{return!1}},"Input is not a valid JSON value"),oe(JSON.parse),e)}function ce(e){return se(w(),Cr(e))}function It(e){return se(Ye([w(),kt(URLSearchParams)]),yr(e))}function tt(e){return t=>e.test(t)}const Sr=tt(/^#[\da-f]{3}$/i),Fr=tt(/^#[\da-f]{4}$/i),Ne=tt(/^#[\da-f]{6}$/i),kr=tt(/^#[\da-f]{8}$/i);function $r(e){return[Ne,kr,Sr,Fr].some(t=>t(e))}function rs(e){let t="#";for(let s=0;s<e.length-1;s+=1)t+=e[1+s].repeat(2);return t}function Pt(e){const t=e.replace(/\s/g,"").toLowerCase();if(/^#[\da-f]{3}$/i.test(t))return _e(rs(t.toLowerCase()+"f"));if(/^#[\da-f]{4}$/i.test(t))return _e(rs(t.toLowerCase()));if(/^#[\da-f]{6}$/i.test(t))return _e(t.toLowerCase()+"ff");if(/^#[\da-f]{8}$/i.test(t))return _e(t.toLowerCase());const s=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);return s?_e(s.slice(1).reduce((n,i)=>n+parseInt(i,10).toString(16).padStart(2,"0"),"#").padEnd(9,"f")):Bs(new Error(`Value "${e}" does not satisfy any of known RGB formats.`))}function xr(e){return _r(Pt(e),vr(t=>t.slice(0,7)))}Y(xr);Y(Pt);function Er(){return G({id:le(),photo_url:$(w()),type:w(),title:w(),username:$(w())})}function is(){return G({added_to_attachment_menu:$(me()),allows_write_to_pm:$(me()),first_name:w(),id:le(),is_bot:$(me()),is_premium:$(me()),last_name:$(w()),language_code:$(w()),photo_url:$(w()),username:$(w())})}function Ar(){return G({auth_date:se(w(),oe(e=>new Date(Number(e)*1e3)),Qe()),can_send_after:$(se(w(),oe(Number),Ct())),chat:$(ce(Er())),chat_type:$(w()),chat_instance:$(w()),hash:w(),query_id:$(w()),receiver:$(ce(is())),start_param:$(w()),signature:w(),user:$(ce(is()))})}function js(){return It(Ar())}function _t(){return $t(w(),se(Ye([w(),le()]),oe(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),Ze($r)))}function qr(){const e=$(se(w(),oe(t=>t==="1")));return G({tgWebAppBotInline:e,tgWebAppData:$(js()),tgWebAppDefaultColors:$(ce(_t())),tgWebAppFullscreen:e,tgWebAppPlatform:w(),tgWebAppShowSettings:e,tgWebAppStartParam:$(w()),tgWebAppThemeParams:ce(_t()),tgWebAppVersion:w()})}function Tr(){return It(qr())}function Os(){return G({eventType:w(),eventData:$(xt())})}function Ir(e){return Ls(()=>he(js(),e),t=>t)}function Mt(e){return Ls(()=>he(Tr(),e),t=>t)}Y(Ir);const Pr=Y(Mt);function Ds(e,t){return t||(t=(s,n)=>JSON.stringify(n)),new URLSearchParams(Object.entries(e).reduce((s,[n,i])=>(Array.isArray(i)?s.push(...i.map(r=>[n,String(r)])):i!=null&&s.push([n,i instanceof Date?(i.getTime()/1e3|0).toString():typeof i=="string"||typeof i=="number"?String(i):typeof i=="boolean"?i?"1":"0":t(n,i)]),s),[])).toString()}function Mr(e){return Ds(e)}function Vr(e){return Ds(e,(t,s)=>t==="tgWebAppData"?Mr(s):JSON.stringify(s))}var Rr=Object.defineProperty,Br=(e,t,s)=>t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,mt=(e,t,s)=>Br(e,typeof t!="symbol"?t+"":t,s);function Us(e){return t=>t instanceof e}function W(e,t){const s=class extends Error{constructor(...r){const a=typeof t=="function"?t(...r):typeof t=="string"?[t]:t||[];super(...a),this.name=e}};mt(s,"is",Us(s));let n=s;return Object.defineProperty(n,"name",{value:e}),n}function Gs(e,t,s){const n=class extends W(e,s){constructor(...a){super(...a),mt(this,"data"),this.data=t(...a)}};mt(n,"is",Us(n));let i=n;return Object.defineProperty(i,"name",{value:e}),i}function Lr(e){return{all:e=e||new Map,on:function(t,s){var n=e.get(t);n?n.push(s):e.set(t,[s])},off:function(t,s){var n=e.get(t);n&&(s?n.splice(n.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var n=e.get(t);n&&n.slice().map(function(i){i(s)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,s)})}}}function Ws(e){return gs(G({TelegramWebviewProxy:G({postEvent:Ft()})}),e)}function Ns(){try{return window.self!==window.top}catch{return!0}}var jr=function(e,t,s){if(arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function st(e,t,s,n,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return n(s(t(e.apply(this,arguments))))};case 5:return function(){return i(n(s(t(e.apply(this,arguments)))))};case 6:return function(){return r(i(n(s(t(e.apply(this,arguments))))))};case 7:return function(){return a(r(i(n(s(t(e.apply(this,arguments)))))))};case 8:return function(){return u(a(r(i(n(s(t(e.apply(this,arguments))))))))};case 9:return function(){return l(u(a(r(i(n(s(t(e.apply(this,arguments)))))))))}}}function be(e,t,s,n,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return u(a(r(i(n(s(t(e)))))));case 9:return l(u(a(r(i(n(s(t(e))))))));default:{for(var c=arguments[0],h=1;h<arguments.length;h++)c=arguments[h](c);return c}}}var nt=function(e,t){var s=typeof e=="number"?function(n){return n.length>=e}:e;return function(){var n=Array.from(arguments);return s(arguments)?t.apply(this,n):function(i){return t.apply(void 0,jr([i],n,!1))}}},Or={_tag:"None"},Dr=function(e){return{_tag:"Some",value:e}},Ur=function(e){return e._tag==="Left"},Gr=function(e){return{_tag:"Left",left:e}},Wr=function(e){return{_tag:"Right",right:e}},ve=Gr,ee=Wr,Nr=nt(2,function(e,t){return Pe(e)?e:t(e.right)}),Hr=function(e){return function(t){return Pe(t)?t:ee(e(t.right))}},zr=function(e,t){return function(s){return Pe(s)?ve(e(s.left)):ee(t(s.right))}},Pe=Ur,Hs=function(e,t){return function(s){return Pe(s)?e(s.left):t(s.right)}},Kr=Hs,zs=Hs,Jr=function(e,t){try{return ee(e())}catch(s){return ve(t(s))}},Zr=Nr,Qr=Or,Yr=Dr;function Xr(e){return st(ee,e.of)}function ei(e){return st(ve,e.of)}function ti(e){return function(t,s){return e.chain(t,function(n){return Pe(n)?e.of(n):s(n.right)})}}function si(e){return function(t,s,n){return e.map(t,zr(s,n))}}function ni(e){return function(t,s){return function(n){return e.map(n,zs(t,s))}}}var Ks=function(e,t){return be(e,ii(t))},ri=function(e,t){return be(e,oi(t))},ii=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},oi=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(s){var n=s[0],i=s[1];return n(i)})}}},Js=function(e){return function(){return Promise.resolve(e)}},ai=nt(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(s){return t(s)()})}}),Zs="Task",Qs={URI:Zs,map:Ks},Ys={of:Js},ui={URI:Zs,map:Ks,of:Js,ap:ri,chain:ai},ci=ei(Ys),Xs=Xr(Ys),li=ni(Qs),hi=nt(3,si(Qs)),en=nt(2,ti(ui)),pi=en,fi=en;class Qa extends W("MethodUnsupportedError",(t,s)=>[`Method "${t}" is unsupported in Mini Apps version ${s}`]){}let Ya=class extends W("MethodParameterUnsupportedError",(t,s,n)=>[`Parameter "${s}" of "${t}" method is unsupported in Mini Apps version ${n}`]){},di=class extends Gs("LaunchParamsRetrieveError",t=>({errors:t}),t=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment","","Collected errors:",...t.map(({source:s,error:n})=>`Source: ${s} / ${n instanceof Error?n.message:String(n)}`)].join(`
`)]){};class _i extends W("InvalidLaunchParamsError",(t,s)=>[`Invalid value for launch params: ${t}`,{cause:s}]){}class tn extends W("UnknownEnvError"){}class mi extends W("InvokeCustomMethodError",t=>[`Server returned error: ${t}`]){}const os="launchParams";function as(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}const qe=st(rt,Zr(Mt)),tu=Y(qe),bi=st(rt,Hr(e=>{const t=new URLSearchParams(e).get("tgWebAppData");return t?Yr(t):Qr}));function rt(){const e=[];for(const[t,s]of[[()=>as(window.location.href),"window.location.href"],[()=>{const n=performance.getEntriesByType("navigation")[0];return n&&as(n.name)},"performance navigation entries"],[()=>ks(os),"local storage"]]){const n=t();if(!n){e.push({source:s,error:new Error("Source is empty")});continue}const i=be(Mt(n),Kr(r=>r,()=>!0));if(typeof i!="boolean"){e.push({source:s,error:i});continue}return At(os,n),ee(n)}return ve(new di(e))}Y(rt);function gi(e,t){const s=new Map,n=Lr(),i=(r,a,u=!1)=>{const l=s.get(r)||new Map;s.set(r,l);const c=l.get(a)||[];l.set(a,c);const h=c.findIndex(p=>p[1]===u);if(h>=0&&(n.off(r,c[h][0]),c.splice(h,1),!c.length&&(l.delete(a),!l.size))){const p=s.size;s.delete(r),p&&!s.size&&t()}};return{on(r,a,u){!s.size&&e();const l=()=>{i(r,a,u)},c=(...b)=>{u&&l(),r==="*"?a({name:b[0],payload:b[1]}):a(...b)};n.on(r,c);const h=s.get(r)||new Map;s.set(r,h);const p=h.get(a)||[];return h.set(a,p),p.push([c,u||!1]),l},off:i,emit:n.emit,clear(){const r=s.size;n.all.clear(),s.clear(),r&&t()}}}function at(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}function ut(e,t,s){const n=[s],i=e[t];typeof i=="function"&&n.push(i);const r=(...u)=>{n.forEach(l=>l(...u))},a=Object.assign((...u)=>{r(...u)},{unwrap(){const{length:u}=n;if(u===1){delete e[t];return}if(u===2){cs(e,t,n[1]);return}n.unshift(1),cs(e,t,r)}});sn(e,t,()=>a,u=>n.push(u))}function us(e,t){const s=e[t];sn(e,t,()=>s,n=>{Object.entries(n).forEach(([i,r])=>{s[i]=r})})}function sn(e,t,s,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:s,set:n})}function cs(e,t,s){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s})}const vi={clipboard_text_received:G({req_id:w(),data:Ce(w())}),custom_method_invoked:G({req_id:w(),result:$(xt()),error:$(w())}),popup_closed:Ce(G({button_id:Ce(w(),()=>{})}),{}),viewport_changed:Ce(G({height:le(),width:Ce(le(),()=>window.innerWidth),is_state_stable:me(),is_expanded:me()}),()=>({height:window.innerHeight,is_state_stable:!0,is_expanded:!0})),theme_changed:G({theme_params:_t()})};function ls(e){if(e.source!==window.parent)return;let t;try{t=he(ce(Os()),e.data)}catch{return}const{eventType:s,eventData:n}=t,i=vi[s];let r;try{r=i?he(i,n):n}catch(a){return Te().forceError([`An error occurred processing the "${s}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose"].join(`
`),t,a)}wi(s,r)}const{on:ne,off:Me,emit:wi}=gi(()=>{const e=window;!e.TelegramGameProxy&&(e.TelegramGameProxy={}),ut(e.TelegramGameProxy,"receiveEvent",at),us(e,"TelegramGameProxy"),!e.Telegram&&(e.Telegram={}),!e.Telegram.WebView&&(e.Telegram.WebView={}),ut(e.Telegram.WebView,"receiveEvent",at),us(e.Telegram,"WebView"),ut(e,"TelegramGameProxy_receiveEvent",at),window.addEventListener("message",ls)},()=>{[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{const t=window;let s=[void 0,t];for(const r of e)if(s=[s[1],s[1][r]],!s[1])return;const[n,i]=s;"unwrap"in i&&(i.unwrap(),n&&n!==t&&!Object.keys(n).length&&delete t[e[0]])}),window.removeEventListener("message",ls)}),yi=U(!1),Ci=U("https://web.telegram.org"),Si=C(yi),Fi=C(Ci),He=U((...e)=>{window.parent.postMessage(...e)}),Te=U(Hn("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:Si})),ki=(...e)=>He()(...e);function nn(e,t){Te().log("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const s=window,n=JSON.stringify({eventType:e,eventData:t});return Ns()?(ki(n,Fi()),ee(void 0)):Ws(s)?(s.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)),ee(void 0)):gs(G({external:G({notify:Ft()})}),s)?(s.external.notify(n),ee(void 0)):ve(new tn)}function Vt(e,t,s={}){const{capture:n=()=>!0,postEvent:i=nn}=s,r=U(),[a,u]=Xe();(Array.isArray(t)?t:[t]).forEach(c=>{a(ne(c,h=>{(Array.isArray(t)?n({event:c,payload:h}):n(h))&&r.set([h])}))});const l=c=>(u(),c);return be(async()=>i(e,s.params),fi(()=>Ae((c,h,p)=>{const b=r();if(b)return c(b[0]);const g=S=>{S&&c(S[0])},y=()=>{r.unsub(g)};r.sub(g),p.on("finalized",y)},s)),hi(l,l))}function su(e,t){const s=rn(e,t);return typeof s=="function"?Et.fn(()=>et(s)):s}function rn(e,t){const s=Ws(window);if(!e)return s||be(rt(),zs(()=>!1,()=>!0));if(s)return Xs(!0);const{timeout:n=100}=t||{};return be(Vt("web_app_request_theme","theme_changed",{...t,timeout:n}),li(i=>Cs.is(i)||tn.is(i)?ee(!1):ve(i),()=>ee(!0)))}function nu({launchParams:e,onEvent:t,resetPostMessage:s}={}){if(e){const r=typeof e=="string"||e instanceof URLSearchParams?e.toString():Vr({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");try{Pr(r)}catch(a){throw new _i(r,a)}At("launchParams",r)}if(Ns()){if(!t)return;s&&He.reset();const r=He();He.set((...a)=>{const[u]=a,l=()=>{r(...a)};try{const c=he(ce(Os()),u);t({name:c.eventType,params:c.eventData},l)}catch{l()}});return}const n=window.TelegramWebviewProxy||{},i=n.postEvent||(()=>{});window.TelegramWebviewProxy={...n,postEvent(r,a){const u=()=>{i(r,a)};t?t({name:r,params:a?JSON.parse(a):void 0},u):u()}},Te().log("Environment was mocked by the mockTelegramEnv function")}function on(e){return({req_id:t})=>t===e}function hs(e){return e.split(".").map(Number)}function $i(e,t){const s=hs(e),n=hs(t),i=Math.max(s.length,n.length);for(let r=0;r<i;r+=1){const a=s[r]||0,u=n[r]||0;if(a!==u)return a>u?1:-1}return 0}const ps={"6.0":["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"],6.1:["web_app_open_tg_link","web_app_open_invoice","web_app_setup_back_button","web_app_set_background_color","web_app_set_header_color","web_app_trigger_haptic_feedback"],6.2:["web_app_open_popup"],6.4:["web_app_close_scan_qr_popup","web_app_open_scan_qr_popup","web_app_read_text_from_clipboard",{method:"web_app_open_link",param:"try_instant_view"}],6.7:["web_app_switch_inline_query"],6.9:["web_app_invoke_custom_method","web_app_request_write_access","web_app_request_phone",{method:"web_app_set_header_color",param:"color"}],"6.10":["web_app_setup_settings_button"],7.2:["web_app_biometry_get_info","web_app_biometry_open_settings","web_app_biometry_request_access","web_app_biometry_request_auth","web_app_biometry_update_token"],7.6:[{method:"web_app_open_link",param:"try_browser"},{method:"web_app_close",param:"return_back"}],7.7:["web_app_setup_swipe_behavior"],7.8:["web_app_share_to_story"],"7.10":["web_app_setup_secondary_button","web_app_set_bottom_bar_color",{method:"web_app_setup_main_button",param:"has_shine_effect"}],"8.0":["web_app_request_safe_area","web_app_request_content_safe_area","web_app_request_fullscreen","web_app_exit_fullscreen","web_app_set_emoji_status","web_app_add_to_home_screen","web_app_check_home_screen","web_app_request_emoji_status_access","web_app_check_location","web_app_open_location_settings","web_app_request_file_download","web_app_request_location","web_app_send_prepared_message","web_app_start_accelerometer","web_app_start_device_orientation","web_app_start_gyroscope","web_app_stop_accelerometer","web_app_stop_device_orientation","web_app_stop_gyroscope","web_app_toggle_orientation_lock"],"9.0":["web_app_device_storage_clear","web_app_device_storage_get_key","web_app_device_storage_save_key","web_app_secure_storage_clear","web_app_secure_storage_get_key","web_app_secure_storage_restore_key","web_app_secure_storage_save_key"],9.1:["web_app_hide_keyboard"]};function fs(e,t){return Object.keys(ps).find(s=>ps[s].some(n=>t?typeof n=="object"&&n.method===e&&n.param===t:n===e))||null}function ke(e,t,s){const n=s?fs(e,t):fs(e);return n?$i(n,s||t)<=0:!1}function xi(e,t,s,n){return be(Vt("web_app_invoke_custom_method","custom_method_invoked",{...n||{},params:{method:e,params:t,req_id:s},capture:on(s)}),pi(({result:i,error:r})=>r?ci(new mi(r)):Xs(i)))}function Ei(e){return Jr(()=>decodeURIComponent(atob(e).replace(/-/g,"+").replace(/_/g,"/").split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")),t=>t)}Y(Ei);function Ai(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,s)=>String.fromCharCode(parseInt(`0x${s}`)))).replace(/\+/g,"-").replace(/\//g,"_")}function qi(e){const t=Ai(typeof e=="string"?e:JSON.stringify(e));return t.length>512?ve(new Error("Value is too long for start parameter")):ee(t)}Y(qi);var Ti=Object.defineProperty,Ii=(e,t,s)=>t in e?Ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,o=(e,t,s)=>Ii(e,typeof t!="symbol"?t+"":t,s),Pi=function(e,t,s){if(arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function an(e,t,s,n,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return n(s(t(e.apply(this,arguments))))};case 5:return function(){return i(n(s(t(e.apply(this,arguments)))))};case 6:return function(){return r(i(n(s(t(e.apply(this,arguments))))))};case 7:return function(){return a(r(i(n(s(t(e.apply(this,arguments)))))))};case 8:return function(){return u(a(r(i(n(s(t(e.apply(this,arguments))))))))};case 9:return function(){return l(u(a(r(i(n(s(t(e.apply(this,arguments)))))))))}}}function f(e,t,s,n,i,r,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return u(a(r(i(n(s(t(e)))))));case 9:return l(u(a(r(i(n(s(t(e))))))));default:{for(var c=arguments[0],h=1;h<arguments.length;h++)c=arguments[h](c);return c}}}var Ve=function(e,t){var s=typeof e=="number"?function(n){return n.length>=e}:e;return function(){var n=Array.from(arguments);return s(arguments)?t.apply(this,n):function(i){return t.apply(void 0,Pi([i],n,!1))}}},Mi={_tag:"None"},Vi=function(e){return{_tag:"Some",value:e}},Ri=function(e){return e._tag==="Left"},un=function(e){return{_tag:"Left",left:e}},cn=function(e){return{_tag:"Right",right:e}},Rt={};function Bi(e,t){return function(s){return function(n){return e.ap(e.map(n,function(i){return function(r){return t.ap(i,r)}}),s)}}}function Li(e,t){return function(s){return function(n){return e.map(n,function(i){return t.map(i,s)})}}}function Bt(e){return function(t,s){return function(n){return e.chain(n,function(i){return e.map(s(i),function(r){var a;return Object.assign({},i,(a={},a[t]=r,a))})})}}}var D=un,V=cn,ji=Ve(2,function(e,t){return ge(e)?e:t(e.right)}),Lt=function(e,t){return f(e,K(t))},ln=function(e,t){return f(e,Gi(t))},jt="Either",K=function(e){return function(t){return ge(t)?t:V(e(t.right))}},Oi={URI:jt,map:Lt},Di=V,Ui=function(e){return function(t){return ge(t)?t:ge(e)?e:V(t.right(e.right))}},Gi=Ui,Wi={URI:jt,map:Lt,ap:ln},Ni={URI:jt,map:Lt,ap:ln,chain:ji},Hi=function(e,t){return function(s){return ge(s)?D(e(s.left)):V(t(s.right))}},ge=Ri,hn=function(e,t){return function(s){return ge(s)?e(s.left):t(s.right)}},Re=hn,zi=function(e,t){try{return V(e())}catch(s){return D(t(s))}},Ki=Di(Rt),Ji=Bt(Ni),ds=Ji;function J(e){return typeof e=="function"?e():e}function re(e,t){return C(()=>ke(e,J(t)))}var Be=Mi,Le=Vi,Zi=function(e,t){return f(e,Xi(t))},Qi=function(e,t){return f(e,to(t))},Yi="Option",Xi=function(e){return function(t){return Ie(t)?Be:Le(e(t.value))}},eo=Le,to=function(e){return function(t){return Ie(t)||Ie(e)?Be:Le(t.value(e.value))}},so=Ve(2,function(e,t){return Ie(e)?Be:t(e.value)}),no={URI:Yi,map:Zi,ap:Qi,chain:so},Ie=function(e){return e._tag==="None"},ro=function(e,t){return function(s){return Ie(s)?e():t(s.value)}},pn=ro,io=eo(Rt),_s=Bt(no);function oo(e){return an(V,e.of)}function ao(e){return an(D,e.of)}function uo(e){return Li(e,Oi)}function co(e){return Bi(e,Wi)}function lo(e){return function(t,s){return e.chain(t,function(n){return ge(n)?e.of(n):s(n.right)})}}function ho(e){return function(t,s,n){return e.map(t,Hi(s,n))}}function po(e){return function(t,s){return function(n){return e.map(n,Re(t,s))}}}var Ot=function(e,t){return f(e,fo(t))},fn=function(e,t){return f(e,_o(t))},fo=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},_o=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(s){var n=s[0],i=s[1];return n(i)})}}},Dt=function(e){return function(){return Promise.resolve(e)}},mo=Ve(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(s){return t(s)()})}}),Ut="Task",Gt={URI:Ut,map:Ot},dn={of:Dt},bo={URI:Ut,map:Ot,ap:fn},go={URI:Ut,map:Ot,of:Dt,ap:fn,chain:mo},vo=function(e,t,s,n){function i(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function u(h){try{c(n.next(h))}catch(p){a(p)}}function l(h){try{c(n.throw(h))}catch(p){a(p)}}function c(h){h.done?r(h.value):i(h.value).then(u,l)}c((n=n.apply(e,[])).next())})},wo=function(e,t){var s={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(h){return l([c,h])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(s=0)),s;)try{if(n=1,i&&(r=c[0]&2?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){s.label=c[1];break}if(c[0]===6&&s.label<r[1]){s.label=r[1],r=c;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(c);break}r[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(h){c=[6,h],i=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},N=ao(dn),L=oo(dn),_n=Dt,yo=po(Gt),Co=function(e,t){return function(){return vo(void 0,void 0,void 0,function(){var s;return wo(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(cn)];case 1:return[2,n.sent()];case 2:return s=n.sent(),[2,un(t(s))];case 3:return[2]}})})}},So=function(e,t){return f(e,B(t))},Fo=function(e,t){return f(e,ko(t))},B=uo(Gt),Wt=Ve(3,ho(Gt)),ko=co(bo),Nt=Ve(2,lo(go)),$o=L,xo="TaskEither",Eo={URI:xo,map:So,ap:Fo,chain:Nt},Ao=$o(Rt),qo=Bt(Eo),We=qo,ae=Nt,$e=Nt;function we(e){return[e]}class ze extends Gs("ValidationError",(t,s)=>({input:t,issues:s}),"Validation error"){}class Ht extends W("CSSVarsBoundError","CSS variables are already bound"){}class To extends W("NotAvailableError",we){}class ru extends W("InvalidEnvError",we){}class Io extends W("FunctionNotAvailableError",we){}class te extends W("InvalidArgumentsError",(t,s)=>[t,{cause:s}]){}class zt extends W("ConcurrentCallError",we){}class Po extends W("SetEmojiStatusError",t=>[`Failed to set emoji status: ${t}`]){}class mn extends W("AccessDeniedError",we){}class Mo extends W("FullscreenFailedError",we){}class Vo extends W("ShareMessageError",we){}class Ro extends W("UnknownThemeParamsKeyError",t=>[`Unknown theme params key passed: ${t}`]){}function T(e,t){const s=C(()=>J(t.version)||"100"),n=C(()=>J(t.isTma)),{requires:i,returns:r}=t,a=i?typeof i=="object"?i:{every:[i]}:void 0,u=m=>{if(!t.supports)return!0;const v=t.supports[m];return ke(v.method,v.param,s())},l=()=>{if(!a)return;const[m,v]="every"in a?["every",a.every]:["some",a.some];for(let d=0;d<v.length;d++){const I=v[d],P=typeof I=="function"?I():ke(I,s())?void 0:`it is unsupported in Mini Apps version ${s()}`;if(P&&(m==="every"||d===v.length-1))return P}},c=(...m)=>{for(const v in t.supports)if(t.supports[v].shouldCheck(...m)&&!u(v))return`option ${v} is not supported in Mini Apps version ${s()}`},h=C(()=>!l()),p=C(()=>s()!=="0.0"),b=C(()=>t.isMounted?t.isMounted():!0),g=C(()=>n()&&p()&&h()&&b()),y=m=>{const v=new Io(m);return["task","promise"].includes(t.returns)?N(v):D(v)},S=(...m)=>r==="plain"?zi(()=>e(...m),v=>v):r==="promise"?Co(()=>e(...m),v=>v):e(...m);return Object.assign((...m)=>{var v;const d="Unable to call function:";if(!n())return y(`${d} it can't be called outside Mini Apps`);if(!p())return y(`${d} the SDK was not initialized. Use the SDK init() function`);const I=l();if(I)return y(`${d} ${I}`);const P=c(...m);if(P)return y(`${d} ${P}`);if(!b()){const R=(v=t.isMounting)!=null&&v.call(t)?"mounting. Wait for the mount completion":"unmounted. Use the mount() method";return y(`${d} the component is ${R}`)}return S(...m)},e,{isAvailable:g,ifAvailable(...m){return g()?Le(S(...m)):Be}},a?{isSupported:h}:{},t.supports?{supports:u}:{})}function q(e){return t=>T(t,e)}function _(e){return Object.assign(Y(e),{ifAvailable(...t){return f(e.ifAvailable(...t),pn(()=>({ok:!1}),s=>({ok:!0,data:et(s)})))}})}function bt(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=n)}return t}function ct(e,t){const s=Object.keys(e),n=Object.keys(t);return s.length!==n.length?!1:s.every(i=>Object.prototype.hasOwnProperty.call(t,i)&&e[i]===t[i])}class pe{constructor({initialState:t,onChange:s}){o(this,"_state"),o(this,"state"),o(this,"setState",n=>{const i={...this.state(),...bt(n)};ct(i,this.state())||this._state.set(i)}),this._state=U(t,{equals:ct}),this.state=C(this._state),this.state.sub(s)}getter(t){return C(()=>this._state()[t])}hasDiff(t){return!ct({...this.state(),...bt(t)},this.state())}}class je{constructor({onMounted:t,restoreState:s,initialState:n,onUnmounted:i,isPageReload:r}){o(this,"_isMounted",U(!1)),o(this,"isMounted",C(this._isMounted)),o(this,"mount"),o(this,"unmount"),this.mount=()=>{if(this.isMounted())return V(void 0);const a=J(r)?s():void 0,u=a?V(a):typeof n=="function"?n():V(n);return f(u,K(l=>{Ke(()=>{this._isMounted.set(!0),t?.(l)})}))},this.unmount=()=>{this._isMounted()&&Ke(()=>{this._isMounted.set(!1),i?.()})}}}class it{constructor({isTma:t,storage:s,onClick:n,offClick:i,initialState:r,isPageReload:a,postEvent:u,payload:l,method:c,version:h}){o(this,"isMounted"),o(this,"isSupported"),o(this,"state"),o(this,"stateSetters"),o(this,"stateBoolSetters"),o(this,"setStateFp"),o(this,"setState"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const p=new pe({initialState:r,onChange(m){s.set(m)}}),b=new je({initialState:r,isPageReload:a,onMounted:p.setState,restoreState:s.get}),g={version:h,requires:c,isTma:t},y=q({...g,returns:"plain"}),S=q({...g,returns:"either",isMounted:b.isMounted});this.isMounted=b.isMounted,this.isSupported=re(c,h),this.state=p.state,this.setStateFp=S(m=>{const v={...this.state(),...bt(m)};return p.hasDiff(v)?f(u(c,l(v)),K(()=>{p.setState(v)})):V(void 0)}),this.setState=_(this.setStateFp),this.onClickFp=y(n),this.onClick=_(this.onClickFp),this.offClickFp=y(i),this.offClick=_(this.offClickFp),this.mountFp=y(()=>{const m=()=>{};return f(b.mount(),Re(m,m))}),this.mount=_(this.mountFp),this.unmount=b.unmount,this.stateSetters=m=>{const v=S(d=>this.setStateFp({[m]:d}));return[_(v),v]},this.stateBoolSetters=m=>{const[,v]=this.stateSetters(m),d=S(()=>v(!1)),I=S(()=>v(!0));return[[_(d),d],[_(I),I]]}}stateGetter(t){return C(()=>this.state()[t])}}class Bo{constructor(t){o(this,"isVisible"),o(this,"isMounted"),o(this,"isSupported"),o(this,"hideFp"),o(this,"hide"),o(this,"showFp"),o(this,"show"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const s=new it({...t,method:"web_app_setup_back_button",payload:n=>({is_visible:n.isVisible}),initialState:{isVisible:!1}});this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.isSupported=s.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}function k(){return{isTma:C(()=>rn())}}function Lo(e){return{get:()=>ks(e),set(t){At(e,t)}}}function jo(){return performance.getEntriesByType("navigation")[0]}function Oo(){const e=jo();return!!e&&e.type==="reload"}function Oe(e){return t=>({...t,...J(e)})}function fe(e){return Oe({storage:Lo(e),isPageReload:Oo})}function De(e,t){return U(e,t)}const bn=De(nn),Ue=(...e)=>bn()(...e),Do=(...e)=>et(Ue(...e)),H=Oe({postEvent:Ue}),gt=De("0.0"),x=Oe({version:gt});function Kt(e,t){return{...f(k(),H,x,fe(e)),onClick(s,n){return ne(t,s,n)},offClick(s,n){Me(t,s,n)}}}const iu=new Bo(Kt("backButton","back_button_pressed"));class Jt{constructor({initialState:t,onMounted:s,restoreState:n,onUnmounted:i,isPageReload:r}){o(this,"_isMounted",U(!1)),o(this,"isMounted",C(this._isMounted)),o(this,"mount"),o(this,"unmount"),this.mount=a=>{if(this._isMounted())return L(void 0);const u=J(r)?n():void 0;return f(u?L(u):t(a),B(l=>{this._isMounted()||Ke(()=>{this._isMounted.set(!0),s?.(l)})}))},this.unmount=()=>{this._isMounted()&&Ke(()=>{this._isMounted.set(!1),i?.()})}}}const ms=new To("Biometry is not available");function lt(e){let t=!1,s=!1,n="",i=!1,r="",a=!1;return e.available&&(t=!0,s=e.token_saved,n=e.device_id,i=e.access_requested,r=e.type,a=e.access_granted),{available:t,tokenSaved:s,deviceId:n,type:r,accessGranted:a,accessRequested:i}}class Uo{constructor({version:t,request:s,postEvent:n,storage:i,onInfoReceived:r,offInfoReceived:a,isTma:u,isPageReload:l}){o(this,"isAvailable"),o(this,"isSupported"),o(this,"isMounted"),o(this,"state"),o(this,"authenticateFp"),o(this,"authenticate"),o(this,"openSettingsFp"),o(this,"openSettings"),o(this,"requestAccessFp"),o(this,"requestAccess"),o(this,"updateTokenFp"),o(this,"updateToken"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const c=m=>{h.setState(lt(m))},h=new pe({initialState:{available:!1,type:"unknown",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1},onChange:i.set}),p=new Jt({initialState(m){return f(s("web_app_biometry_get_info","biometry_info_received",m),B(lt))},isPageReload:l,onMounted(m){h.setState(m),r(c)},onUnmounted(){a(c)},restoreState:i.get}),b={version:t,requires:"web_app_biometry_request_auth",isTma:u},g=q({...b,returns:"either"}),y=q({...b,returns:"task"}),S=q({...b,isMounted:p.isMounted,returns:"task"});this.isAvailable=h.getter("available"),this.isMounted=p.isMounted,this.isSupported=re("web_app_biometry_request_auth",t),this.state=h.state,this.unmount=p.unmount,this.mountFp=y(p.mount),this.authenticateFp=S(m=>this.isAvailable()?f(s("web_app_biometry_request_auth","biometry_auth_requested",{...m,params:{reason:((m||{}).reason||"").trim()}}),B(v=>(h.setState({token:v.token}),v))):N(ms)),this.openSettingsFp=g(()=>n("web_app_biometry_open_settings")),this.requestAccessFp=S(m=>f(s("web_app_biometry_request_access","biometry_info_received",{...m,params:{reason:((m||{}).reason||"").trim()}}),ae(v=>{const d=lt(v);return d.available?(h.setState(d),L(d.accessRequested)):N(ms)}))),this.updateTokenFp=S((m={})=>{var v;return f(s("web_app_biometry_update_token","biometry_token_updated",{...m,params:{token:m.token||"",reason:(v=m.reason)==null?void 0:v.trim()}}),B(d=>d.status))}),this.authenticate=_(this.authenticateFp),this.openSettings=_(this.openSettingsFp),this.requestAccess=_(this.requestAccessFp),this.updateToken=_(this.updateTokenFp),this.mount=_(this.mountFp)}}const Go=(e,t,s)=>Vt(e,t,{postEvent:Ue,...s}),Q=Oe({request:Go});new Uo({...f(k(),H,x,Q,fe("biometry")),offInfoReceived(e){Me("biometry_info_received",e)},onInfoReceived(e){return ne("biometry_info_received",e)}});class Wo{constructor({postEvent:t,storage:s,isTma:n,isPageReload:i}){o(this,"isConfirmationEnabled"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"disableConfirmationFp"),o(this,"disableConfirmation"),o(this,"enableConfirmationFp"),o(this,"enableConfirmation");const r=new pe({initialState:{isConfirmationEnabled:!1},onChange(p){s.set(p)}}),a=new je({onMounted:r.setState,restoreState:s.get,initialState:{isConfirmationEnabled:!1},isPageReload:i}),u={requires:"web_app_setup_closing_behavior",isTma:n},l=q({...u,returns:"plain"}),c=q({...u,returns:"either",isMounted:a.isMounted}),h=p=>p===this.isConfirmationEnabled()?V(void 0):(r.setState({isConfirmationEnabled:p}),t("web_app_setup_closing_behavior",{need_confirmation:p}));this.isConfirmationEnabled=r.getter("isConfirmationEnabled"),this.isMounted=a.isMounted,this.disableConfirmationFp=c(()=>h(!1)),this.enableConfirmationFp=c(()=>h(!0)),this.mountFp=l(()=>{const p=()=>{};return f(a.mount(),Re(p,p))}),this.unmount=a.unmount,this.disableConfirmation=_(this.disableConfirmationFp),this.enableConfirmation=_(this.enableConfirmationFp),this.mount=_(this.mountFp)}}new Wo(f(k(),fe("closingBehavior"),H));class No{constructor({version:t,isTma:s,invokeCustomMethod:n}){o(this,"isSupported"),o(this,"deleteItemFp"),o(this,"deleteItem"),o(this,"getItemFp"),o(this,"getItem"),o(this,"getItemsFp"),o(this,"getItems"),o(this,"getKeysFp"),o(this,"getKeys"),o(this,"setItemFp"),o(this,"setItem"),o(this,"clearFp"),o(this,"clear");const i=q({version:t,requires:"web_app_invoke_custom_method",isTma:s,returns:"task"});this.isSupported=re("web_app_invoke_custom_method",t),this.deleteItemFp=i((r,a)=>{const u=Array.isArray(r)?r:[r];return f(u.length?n("deleteStorageValues",{keys:u},a):L(void 0),B(()=>{}))}),this.getItemFp=i((r,a)=>f(this.getItemsFp([r],a),B(u=>u[r]||""))),this.getItemsFp=i((r,a)=>f(r.length?n("getStorageValues",{keys:r},a):L({}),B(u=>({...r.reduce((l,c)=>(l[c]="",l),{}),...he($t(w(),w()),u)})))),this.getKeysFp=i(r=>f(n("getStorageKeys",{},r),B(a=>he(vs(w()),a)))),this.setItemFp=i((r,a,u)=>f(n("saveStorageValue",{key:r,value:a},u),B(()=>{}))),this.clearFp=i(r=>f(this.getKeysFp(r),ae(this.deleteItemFp))),this.deleteItem=_(this.deleteItemFp),this.getItem=_(this.getItemFp),this.getItems=_(this.getItemsFp),this.getKeys=_(this.getKeysFp),this.setItem=_(this.setItemFp),this.clear=_(this.clearFp)}}const ht=De(0);function gn(){return ht.set(ht()+1),ht().toString()}function Ho(e,t,s){return xi(e,t,gn(),{...s||{},postEvent:Ue})}const Zt=Oe({invokeCustomMethod:Ho});new No(f(k(),x,Zt));function zo({request:e,...t}){return T(s=>f(e("web_app_request_emoji_status_access","emoji_status_access_requested",s),B(n=>n.status)),{...t,requires:"web_app_request_emoji_status_access",returns:"task"})}const Ko=zo(f(k(),x,Q));_(Ko);function Jo({request:e,...t}){return T((s,n)=>f(e("web_app_set_emoji_status",["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:s,duration:(n||{}).duration},...n}),$e(i=>i&&"error"in i?N(new Po(i.error)):L(void 0))),{...t,requires:"web_app_set_emoji_status",returns:"task"})}const Zo=Jo(f(k(),Q,x));_(Zo);class Qo{constructor({postEvent:t,isTma:s,version:n}){o(this,"isSupported"),o(this,"impactOccurredFp"),o(this,"impactOccurred"),o(this,"notificationOccurredFp"),o(this,"notificationOccurred"),o(this,"selectionChangedFp"),o(this,"selectionChanged");const i="web_app_trigger_haptic_feedback",r=q({requires:i,isTma:s,version:n,returns:"plain"});this.isSupported=re(i,n),this.impactOccurredFp=r(a=>t(i,{type:"impact",impact_style:a})),this.notificationOccurredFp=r(a=>t(i,{type:"notification",notification_type:a})),this.selectionChangedFp=r(()=>t(i,{type:"selection_change"})),this.impactOccurred=_(this.impactOccurredFp),this.notificationOccurred=_(this.notificationOccurredFp),this.selectionChanged=_(this.selectionChangedFp)}}new Qo(f(k(),H,x));function Yo({postEvent:e,...t}){return T(()=>e("web_app_add_to_home_screen"),{...t,requires:"web_app_add_to_home_screen",returns:"either"})}const Xo=Yo(f(k(),x,H));_(Xo);function ea({request:e,...t}){return T(s=>f(e("web_app_check_home_screen","home_screen_checked",s),B(n=>n.status||"unknown")),{...t,requires:"web_app_check_home_screen",returns:"task"})}const ta=ea(f(k(),x,Q));_(ta);class sa{constructor({retrieveInitData:t}){o(this,"_state",U()),o(this,"_raw",U()),o(this,"state",C(this._state)),o(this,"authDate",this.fromState("auth_date")),o(this,"canSendAfter",this.fromState("can_send_after")),o(this,"canSendAfterDate",C(()=>{const s=this.authDate(),n=this.canSendAfter();return n&&s?new Date(s.getTime()+n*1e3):void 0})),o(this,"chat",this.fromState("chat")),o(this,"chatType",this.fromState("chat_type")),o(this,"chatInstance",this.fromState("chat_instance")),o(this,"hash",this.fromState("hash")),o(this,"queryId",this.fromState("query_id")),o(this,"raw",C(this._raw)),o(this,"receiver",this.fromState("receiver")),o(this,"signature",this.fromState("signature")),o(this,"startParam",this.fromState("start_param")),o(this,"user",this.fromState("user")),o(this,"restoreFp"),o(this,"restore"),this.restoreFp=()=>f(t(),K(pn(()=>{},({raw:s,obj:n})=>{this._state.set(n),this._raw.set(s)}))),this.restore=Y(this.restoreFp)}fromState(t){return C(()=>{const s=this._state();return s?s[t]:void 0})}}new sa({retrieveInitData(){return f(Ki,ds("obj",()=>f(qe(),K(({tgWebAppData:e})=>e?Le(e):Be))),ds("raw",bi),K(({obj:e,raw:t})=>f(io,_s("obj",()=>e),_s("raw",()=>t))))}});class na{constructor({version:t,request:s,isTma:n}){o(this,"isOpened"),o(this,"isSupported"),o(this,"openSlugFp"),o(this,"openSlug"),o(this,"openUrlFp"),o(this,"openUrl");const i=q({version:t,isTma:n,requires:"web_app_open_invoice",returns:"task"}),r=U(!1),a=()=>{r.set(!1)};this.isSupported=re("web_app_open_invoice",t),this.isOpened=C(r),this.openSlugFp=i((u,l)=>f(this.isOpened()?N(new zt("Invoice is already opened")):L(void 0),ae(()=>(r.set(!0),s("web_app_open_invoice","invoice_closed",{...l,params:{slug:u},capture:c=>u===c.slug}))),Wt(c=>(a(),c),c=>(a(),c.status)))),this.openUrlFp=i((u,l)=>{const{hostname:c,pathname:h}=new URL(u,window.location.href);if(c!=="t.me")return N(new te(`Link has unexpected hostname: ${c}`));const p=h.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);return p?this.openSlugFp(p[2],l):N(new te('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"'))}),this.openUrl=_(this.openUrlFp),this.openSlug=_(this.openSlugFp)}}new na(f(k(),Q,x));function ra({postEvent:e,...t}){return T((s,n={})=>{if(typeof s=="string")try{s=new URL(s)}catch(i){return D(new te(`"${s.toString()}" is invalid URL`,i))}return e("web_app_open_link",{url:s.toString(),try_browser:n.tryBrowser,try_instant_view:n.tryInstantView})},{...t,returns:"either"})}const ia=ra(f(k(),H));_(ia);function oa({postEvent:e,version:t,...s}){return T(n=>{const i=n.toString();return i.match(/^https:\/\/t.me\/.+/)?ke("web_app_open_tg_link",J(t))?(n=new URL(n),e("web_app_open_tg_link",{path_full:n.pathname+n.search})):(window.location.href=i,V(void 0)):D(new te(`"${i}" is invalid URL`))},{...s,returns:"either"})}const vn=oa(f(k(),H,x));_(vn);function aa({openTelegramLink:e,...t}){return T((s,n)=>e("https://t.me/share/url?"+new URLSearchParams({url:s,text:n||""}).toString().replace(/\+/g,"%20")),{...t,returns:"either"})}const ua=aa({...k(),openTelegramLink:vn});_(ua);function ca(e){let t=!1,s,n;return e.available&&(t=!0,s=e.access_requested,n=e.access_granted),{available:t,accessGranted:n||!1,accessRequested:s||!1}}class la{constructor({version:t,request:s,postEvent:n,storage:i,isTma:r,isPageReload:a}){o(this,"state"),o(this,"isAvailable"),o(this,"isAccessGranted"),o(this,"isAccessRequested"),o(this,"isMounted"),o(this,"isSupported"),o(this,"openSettingsFp"),o(this,"openSettings"),o(this,"requestLocationFp"),o(this,"requestLocation"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const u=new pe({initialState:{available:!1,accessGranted:!1,accessRequested:!1},onChange:i.set}),l=new Jt({isPageReload:a,restoreState:i.get,onMounted:u.setState,initialState(g){return f(s("web_app_check_location","location_checked",g),B(ca))}}),c={version:t,requires:"web_app_check_location",isTma:r},h=q({...c,returns:"either"}),p=q({...c,returns:"task"}),b=q({...c,returns:"task",isMounted:l.isMounted});this.isAvailable=u.getter("available"),this.isAccessRequested=u.getter("accessRequested"),this.isAccessGranted=u.getter("accessGranted"),this.isSupported=re("web_app_check_location",t),this.isMounted=l.isMounted,this.state=u.state,this.unmount=l.unmount,this.mountFp=p(l.mount),this.openSettingsFp=h(()=>n("web_app_open_location_settings")),this.requestLocationFp=b(g=>f(s("web_app_request_location","location_requested",g),B(y=>{if(!y.available)return u.setState({available:!1}),null;const{available:S,...m}=y;return m}))),this.mount=_(this.mountFp),this.openSettings=_(this.openSettingsFp),this.requestLocation=_(this.requestLocationFp)}}new la(f(k(),H,x,Q,fe("locationManager")));class ha{constructor({defaults:t,...s}){o(this,"bgColor"),o(this,"hasShineEffect"),o(this,"isEnabled"),o(this,"isLoaderVisible"),o(this,"isVisible"),o(this,"isMounted"),o(this,"state"),o(this,"text"),o(this,"textColor"),o(this,"showFp"),o(this,"show"),o(this,"hideFp"),o(this,"hide"),o(this,"enableFp"),o(this,"enable"),o(this,"enableShineEffectFp"),o(this,"enableShineEffect"),o(this,"disableFp"),o(this,"disable"),o(this,"disableShineEffectFp"),o(this,"disableShineEffect"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"setTextColorFp"),o(this,"setTextColor"),o(this,"setTextFp"),o(this,"setText"),o(this,"showLoaderFp"),o(this,"showLoader"),o(this,"hideLoaderFp"),o(this,"hideLoader"),o(this,"setParamsFp"),o(this,"setParams"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick");const n=new it({...s,version:"100",initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"},method:"web_app_setup_main_button",payload:r=>({has_shine_effect:r.hasShineEffect,is_visible:r.isVisible,is_active:r.isEnabled,is_progress_visible:r.isLoaderVisible,text:r.text,color:r.bgColor,text_color:r.textColor})}),i=(r,a)=>{const u=n.stateGetter(r);return C(()=>u()||J(a))};this.bgColor=i("bgColor",t.bgColor),this.textColor=i("textColor",t.textColor),this.hasShineEffect=n.stateGetter("hasShineEffect"),this.isEnabled=n.stateGetter("isEnabled"),this.isLoaderVisible=n.stateGetter("isLoaderVisible"),this.text=n.stateGetter("text"),this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.state=n.state,[this.setBgColor,this.setBgColorFp]=n.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=n.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=n.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=n.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=n.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=n.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.setParams=n.setState,this.setParamsFp=n.setStateFp,this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}function wn(e,t,s){return f(Kt(e,t),n=>({...n,defaults:s}))}const vt=De({});function Qt(e,t){document.documentElement.style.setProperty(e,t)}function Yt(e){document.documentElement.style.removeProperty(e)}function pa(e){return f(Pt(e),K(t=>Math.sqrt([.299,.587,.114].reduce((s,n,i)=>{const r=parseInt(t.slice(1+i*2,1+(i+1)*2),16);return s+r*r*n},0))<120))}const yn=Y(pa);class fa{constructor({initialState:t,onChange:s,offChange:n,isTma:i,storage:r,isPageReload:a}){o(this,"accentTextColor"),o(this,"bgColor"),o(this,"buttonColor"),o(this,"buttonTextColor"),o(this,"bottomBarBgColor"),o(this,"destructiveTextColor"),o(this,"headerBgColor"),o(this,"hintColor"),o(this,"linkColor"),o(this,"secondaryBgColor"),o(this,"sectionBgColor"),o(this,"sectionHeaderTextColor"),o(this,"sectionSeparatorColor"),o(this,"subtitleTextColor"),o(this,"textColor"),o(this,"_isCssVarsBound",U(!1)),o(this,"isCssVarsBound",C(this._isCssVarsBound)),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"state"),o(this,"isDark",C(()=>{const g=this.bgColor();return!g||yn(g)})),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const u=new pe({initialState:{},onChange:r.set}),l=g=>{u.setState(g.theme_params)},c=new je({initialState:()=>V(J(t)),isPageReload:a,onMounted(g){u.setState(g),s(l)},onUnmounted(){n(l)},restoreState:r.get}),h={isTma:i,returns:"either"},p=q(h),b=q({...h,isMounted:c.isMounted});this.accentTextColor=u.getter("accent_text_color"),this.bgColor=u.getter("bg_color"),this.buttonColor=u.getter("button_color"),this.buttonTextColor=u.getter("button_text_color"),this.bottomBarBgColor=u.getter("bottom_bar_bg_color"),this.destructiveTextColor=u.getter("destructive_text_color"),this.headerBgColor=u.getter("header_bg_color"),this.hintColor=u.getter("hint_color"),this.linkColor=u.getter("link_color"),this.secondaryBgColor=u.getter("secondary_bg_color"),this.sectionBgColor=u.getter("section_bg_color"),this.sectionHeaderTextColor=u.getter("section_header_text_color"),this.sectionSeparatorColor=u.getter("section_separator_color"),this.subtitleTextColor=u.getter("subtitle_text_color"),this.textColor=u.getter("text_color"),this.state=u.state,this.isMounted=c.isMounted,this.bindCssVarsFp=b(g=>{if(this._isCssVarsBound())return D(new Ht);g||(g=m=>`--tg-theme-${Nn(m)}`);const y=m=>{Object.entries(u.state()).forEach(([v,d])=>{d&&m(v,d)})},S=()=>{y((m,v)=>{Qt(g(m),v)})};return S(),u.state.sub(S),this._isCssVarsBound.set(!0),V(()=>{y(Yt),u.state.unsub(S),this._isCssVarsBound.set(!1)})}),this.mountFp=p(c.mount),this.unmount=c.unmount,this.bindCssVars=_(this.bindCssVarsFp),this.mount=_(this.mountFp)}}const Je=new fa({...f(k(),fe("themeParams")),offChange(e){Me("theme_changed",e)},onChange(e){ne("theme_changed",e)},initialState:vt});new ha(wn("mainButton","main_button_pressed",{bgColor:C(()=>Je.buttonColor()||"#2481cc"),textColor:C(()=>Je.buttonTextColor()||"#ffffff")}));class da{constructor({storage:t,isPageReload:s,version:n,postEvent:i,isTma:r,theme:a,onVisibilityChanged:u,offVisibilityChanged:l}){o(this,"isSupported"),o(this,"isDark",C(()=>{const d=this.bgColorRgb();return d?yn(d):!1})),o(this,"isActive"),o(this,"state"),o(this,"isCssVarsBound"),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"bgColor"),o(this,"bgColorRgb"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"headerColor"),o(this,"headerColorRgb"),o(this,"setHeaderColorFp"),o(this,"setHeaderColor"),o(this,"bottomBarColor"),o(this,"bottomBarColorRgb"),o(this,"setBottomBarColorFp"),o(this,"setBottomBarColor"),o(this,"closeFp"),o(this,"close"),o(this,"readyFp"),o(this,"ready");const c=d=>{b.setState({isActive:d.is_visible})},h=d=>{[[this.headerColor,"web_app_set_header_color"],[this.bgColor,"web_app_set_background_color"],[this.bottomBarColor,"web_app_set_bottom_bar_color"]].forEach(([I,P])=>{const R=I();if(!Ne(R)&&(P!=="web_app_set_header_color"||!["bg_color","secondary_bg_color"].includes(R))){const F=d[R];F&&i(P,{color:F})}})},p=new je({initialState(){return V({bgColor:"bg_color",headerColor:"header_bg_color",bottomBarColor:"bottom_bar_bg_color",isActive:!0})},isPageReload:s,onMounted:d=>{u(c),a.sub(h),b.setState(d)},onUnmounted(){l(c),a.unsub(h)},restoreState:t.get});this.isMounted=p.isMounted,this.mountFp=T(()=>{const d=()=>{};return f(p.mount(),Re(d,d))},{isTma:r,returns:"plain"}),this.mount=_(this.mountFp),this.unmount=p.unmount;const b=new pe({initialState:{bgColor:"bg_color",bottomBarColor:"bottom_bar_bg_color",headerColor:"bg_color",isActive:!1},onChange:t.set});this.state=b.state;const g=d=>Ne(d)?d:J(a)[d],y=d=>C(()=>g(d()));this.isActive=b.getter("isActive"),this.isSupported=C(()=>["web_app_set_header_color","web_app_set_background_color","web_app_set_bottom_bar_color"].some(d=>ke(d,J(n))));const S=U(!1);this.isCssVarsBound=C(S),this.bindCssVarsFp=T(d=>{if(S())return D(new Ht);const[I,P]=Xe(()=>{S.set(!1)}),R=(F,M)=>{const A=()=>{Qt(F,M()||null)};A(),I(M.sub(A),Yt.bind(null,F))};return d||(d=F=>`--tg-${Ss(F)}`),R(d("bgColor"),this.bgColorRgb),R(d("bottomBarColor"),this.bottomBarColorRgb),R(d("headerColor"),this.headerColorRgb),S.set(!0),V(P)},{isTma:r,returns:"either",isMounted:this.isMounted}),this.bindCssVars=_(this.bindCssVarsFp);const m=d=>{const I=b.getter(d),P=y(I),R={headerColor:"web_app_set_header_color",bgColor:"web_app_set_background_color",bottomBarColor:"web_app_set_bottom_bar_color"}[d],F=T(M=>{if(M===I())return V(void 0);if(R==="web_app_set_header_color"&&(M==="bg_color"||M==="secondary_bg_color"))return f(i("web_app_set_header_color",{color_key:M}),K(()=>{b.setState({[d]:M})}));const A=g(M);return f(A?i(R,{color:A}):D(new Ro(M)),K(()=>{b.setState({[d]:A})}))},{isTma:r,version:n,requires:R,isMounted:this.isMounted,returns:"either",supports:d==="headerColor"?{rgb:{method:"web_app_set_header_color",param:"color",shouldCheck:Ne}}:void 0});return[I,P,_(F),F]};[this.bgColor,this.bgColorRgb,this.setBgColor,this.setBgColorFp]=m("bgColor"),[this.headerColor,this.headerColorRgb,this.setHeaderColor,this.setHeaderColorFp]=m("headerColor"),[this.bottomBarColor,this.bottomBarColorRgb,this.setBottomBarColor,this.setBottomBarColorFp]=m("bottomBarColor");const v=q({isTma:r,returns:"either"});this.closeFp=v(d=>i("web_app_close",{return_back:d})),this.close=_(this.closeFp),this.readyFp=v(()=>i("web_app_ready")),this.ready=_(this.readyFp)}}const _a=new da({...f(k(),H,x,fe("miniApp")),offVisibilityChanged(e){Me("visibility_changed",e)},onVisibilityChanged(e){ne("visibility_changed",e)},theme:Je.state});function ma(e){const t=e.message.trim(),s=(e.title||"").trim(),n=e.buttons||[];if(s.length>64)return D(new te(`Invalid title: ${s}`));if(!t||t.length>256)return D(new te(`Invalid message: ${t}`));if(n.length>3)return D(new te(`Invalid buttons count: ${n.length}`));const i=[];if(!n.length)i.push({type:"close",id:""});else for(let r=0;r<n.length;r++){const a=n[r],u=a.id||"";if(u.length>64)return D(new te(`Button with index ${r} has invalid id: ${u}`));if(!a.type||a.type==="default"||a.type==="destructive"){const l=a.text.trim();if(!l||l.length>64)return D(new te(`Button with index ${r} has invalid text: ${l}`));i.push({type:a.type,text:l,id:u})}else i.push({type:a.type,id:u})}return V({title:s,message:t,buttons:i})}class ba{constructor({version:t,isTma:s,request:n}){o(this,"isOpened"),o(this,"isSupported"),o(this,"showFp"),o(this,"show");const i=U(!1),r=()=>{i.set(!1)},a=q({version:t,isTma:s,requires:"web_app_open_popup",returns:"task"});this.isSupported=re("web_app_open_popup",t),this.isOpened=C(i),this.showFp=a(u=>f(this.isOpened()?N(new zt("A popup is already opened")):L(void 0),$e(()=>_n(ma(u))),ae(l=>(i.set(!0),n("web_app_open_popup","popup_closed",{...u,params:l}))),Wt(l=>(r(),l),l=>(r(),l.button_id)))),this.show=_(this.showFp)}}new ba(f(k(),Q,x));function ga({request:e,...t}){return T(s=>f(e("web_app_request_phone","phone_requested",s),B(n=>n.status)),{...t,requires:"web_app_request_phone",returns:"task"})}const Cn=ga(f(k(),x,Q));_(Cn);function va({invokeCustomMethod:e,requestPhoneAccess:t,...s}){const n=a=>f(e("getRequestedContact",{},{...a,timeout:(a||{}).timeout||5e3}),$e(u=>{const l=pt(w(),u);if(!l.success)return N(new ze(u,l.issues));if(!l.output)return L(void 0);const c=pt(It(G({contact:ce(G({user_id:le(),phone_number:w(),first_name:w(),last_name:$(w())})),auth_date:se(w(),oe(h=>new Date(Number(h)*1e3)),Qe()),hash:w()})),l.output);return c.success?L({raw:l.output,parsed:c.output}):N(new ze(l.output,c.issues))})),i=a=>f(n(a),yo(u=>ze.is(u)?D(u):V(void 0),u=>V(u))),r=a=>Ae(async(u,l,c)=>{let h=50;for(;!c.isRejected;){const p=await i(c)();if(p._tag==="Left")return l(p.left);if(p.right)return u(p.right);await new Promise(b=>setTimeout(b,h)),h+=50}},a);return T(a=>Ae.fn(u=>f(i(u),ae(l=>l?L(l):f(t(u),$e(c=>c==="sent"?r(u):N(new mn("User denied access")))))),a),{...s,returns:"task",requires:"web_app_request_phone"})}function wa({requestContact:e,...t}){return T(e,{...t,returns:"task",requires:"web_app_request_phone"})}const Sn=va({...f(k(),Zt,x),requestPhoneAccess:Cn});_(Sn);const ya=wa({...f(k(),x),requestContact(e){return f(Sn(e),B(t=>t.parsed))}});_(ya);function Ca({request:e,...t}){return T(s=>f(e("web_app_request_write_access","write_access_requested",s),B(n=>n.status)),{...t,requires:"web_app_request_write_access",returns:"task"})}const Sa=Ca(f(k(),x,Q));_(Sa);class Fa{constructor({version:t,onClosed:s,onTextReceived:n,isTma:i,postEvent:r}){o(this,"isOpened"),o(this,"isSupported"),o(this,"captureFp"),o(this,"capture"),o(this,"closeFp"),o(this,"close"),o(this,"openFp"),o(this,"open");const a={version:t,requires:"web_app_open_scan_qr_popup",isTma:i},u=q({...a,returns:"either"}),l=q({...a,returns:"task"}),c=U(!1),h=()=>{c.set(!1)};this.isSupported=re("web_app_open_scan_qr_popup",t),this.isOpened=C(c),this.captureFp=l(p=>{let b;return f(this.openFp({...p,onCaptured:g=>{p.capture(g)&&(b=g,this.close())}}),B(()=>b))}),this.closeFp=u(()=>f(r("web_app_close_scan_qr_popup"),K(h))),this.openFp=l(p=>f(this.isOpened()?N(new zt("The QR Scanner is already opened")):async()=>r("web_app_open_scan_qr_popup",{text:p.text}),$e(()=>{const[b,g]=Xe(),y=S=>(g(),S);return f(Ae(S=>{b(s(S),n(p.onCaptured))},p),Wt(y,y))}))),this.open=_(this.openFp),this.capture=_(this.captureFp),this.close=_(this.closeFp)}}const ou=new Fa({...f(k(),H,x),onClosed(e){return ne("scan_qr_popup_closed",e)},onTextReceived(e){return ne("qr_text_received",t=>{e(t.data)})}});class ka{constructor({defaults:t,...s}){o(this,"isSupported"),o(this,"position"),o(this,"bgColor"),o(this,"hasShineEffect"),o(this,"isEnabled"),o(this,"isLoaderVisible"),o(this,"isVisible"),o(this,"isMounted"),o(this,"state"),o(this,"text"),o(this,"textColor"),o(this,"showFp"),o(this,"show"),o(this,"hideFp"),o(this,"hide"),o(this,"enableFp"),o(this,"enable"),o(this,"enableShineEffectFp"),o(this,"enableShineEffect"),o(this,"disableFp"),o(this,"disable"),o(this,"disableShineEffectFp"),o(this,"disableShineEffect"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"setTextColorFp"),o(this,"setTextColor"),o(this,"setTextFp"),o(this,"setText"),o(this,"setPositionFp"),o(this,"setPosition"),o(this,"showLoaderFp"),o(this,"showLoader"),o(this,"hideLoaderFp"),o(this,"hideLoader"),o(this,"setParamsFp"),o(this,"setParams"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick");const n=new it({...s,initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Cancel",position:"left"},method:"web_app_setup_secondary_button",payload:r=>({has_shine_effect:r.hasShineEffect,is_visible:r.isVisible,is_active:r.isEnabled,is_progress_visible:r.isLoaderVisible,text:r.text,color:r.bgColor,text_color:r.textColor,position:r.position})}),i=(r,a)=>{const u=n.stateGetter(r);return C(()=>u()||J(a))};this.isSupported=re("web_app_setup_secondary_button",s.version),this.bgColor=i("bgColor",t.bgColor),this.textColor=i("textColor",t.textColor),this.position=n.stateGetter("position"),this.hasShineEffect=n.stateGetter("hasShineEffect"),this.isEnabled=n.stateGetter("isEnabled"),this.isLoaderVisible=n.stateGetter("isLoaderVisible"),this.text=n.stateGetter("text"),this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.state=n.state,[this.setPosition,this.setPositionFp]=n.stateSetters("position"),[this.setBgColor,this.setBgColorFp]=n.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=n.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=n.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=n.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=n.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=n.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.setParams=n.setState,this.setParamsFp=n.setStateFp,this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount}}new ka(wn("secondaryButton","secondary_button_pressed",{bgColor:C(()=>_a.bottomBarColorRgb()||"#000000"),textColor:C(()=>Je.buttonColor()||"#2481cc")}));class $a{constructor(t){o(this,"isVisible"),o(this,"isMounted"),o(this,"isSupported"),o(this,"hideFp"),o(this,"hide"),o(this,"showFp"),o(this,"show"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const s=new it({...t,method:"web_app_setup_settings_button",payload:n=>({is_visible:n.isVisible}),initialState:{isVisible:!1}});this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.isSupported=s.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}new $a(Kt("settingsButton","settings_button_pressed"));class xa{constructor({postEvent:t,storage:s,isTma:n,isPageReload:i,version:r}){o(this,"isSupported"),o(this,"isVerticalEnabled"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"disableVerticalFp"),o(this,"disableVertical"),o(this,"enableVerticalFp"),o(this,"enableVertical");const a={isVerticalEnabled:!0},u=new pe({initialState:a,onChange(g){s.set(g)}}),l=new je({initialState:a,isPageReload:i,onMounted:u.setState,restoreState:s.get}),c={requires:"web_app_setup_swipe_behavior",isTma:n,version:r},h=q({...c,returns:"plain"}),p=q({...c,isMounted:l.isMounted,returns:"either"}),b=g=>{const y={isVerticalEnabled:g};return u.hasDiff(y)?f(t("web_app_setup_swipe_behavior",{allow_vertical_swipe:g}),K(()=>{u.setState(y)})):V(void 0)};this.isSupported=re("web_app_setup_swipe_behavior",r),this.isVerticalEnabled=u.getter("isVerticalEnabled"),this.isMounted=l.isMounted,this.disableVerticalFp=p(()=>b(!1)),this.enableVerticalFp=p(()=>b(!0)),this.mountFp=h(()=>{const g=()=>{};return f(l.mount(),Re(g,g))}),this.unmount=l.unmount,this.disableVertical=_(this.disableVerticalFp),this.enableVertical=_(this.enableVerticalFp),this.mount=_(this.mountFp)}}const au=new xa(f(k(),H,x,fe("swipeBehavior")));function Ea({request:e,...t}){return T((s,n,i)=>f(e("web_app_request_file_download","file_download_requested",{...i,params:{url:s,file_name:n}}),ae(r=>r.status==="downloading"?L(void 0):N(new mn("User denied the action")))),{...t,requires:"web_app_request_file_download",returns:"task"})}const Aa=Ea(f(k(),Q,x));_(Aa);function qa({invokeCustomMethod:e,...t}){return T(s=>f(e("getCurrentTime",{},s),ae(n=>{const i=pt(se(le(),Ct(),oe(r=>new Date(r*1e3)),Qe()),n);return i.success?L(i.output):N(new ze(n,i.issues))})),{...t,requires:"web_app_invoke_custom_method",returns:"task"})}const Ta=qa(f(k(),Zt,x));_(Ta);function Ia({postEvent:e,...t}){return T(()=>e("web_app_hide_keyboard"),{...t,returns:"either",requires:"web_app_hide_keyboard"})}const Pa=Ia(f(k(),H,x));_(Pa);function Ma({request:e,createRequestId:t,...s}){return T(n=>{const i=t();return f(e("web_app_read_text_from_clipboard","clipboard_text_received",{...n,params:{req_id:i},capture:on(i)}),B(({data:r=null})=>r))},{...s,requires:"web_app_read_text_from_clipboard",returns:"task"})}const Va=Ma({...f(k(),x,Q),createRequestId:gn});_(Va);function Ra({postEvent:e,...t}){return T(s=>{const{size:n}=new Blob([s]);return!n||n>4096?D(new te(n?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data")):e("web_app_data_send",{data:s})},{...t,returns:"either"})}const Ba=Ra(f(k(),H)),uu=_(Ba);function La({request:e,...t}){return T((s,n)=>f(e("web_app_send_prepared_message",["prepared_message_failed","prepared_message_sent"],{...n,params:{id:s}}),ae(i=>i&&"error"in i?N(new Vo(i.error)):L(void 0))),{...t,requires:"web_app_send_prepared_message",returns:"task"})}const ja=La(f(k(),Q,x));_(ja);function Oa({postEvent:e,...t}){return T((s,n={})=>e("web_app_share_to_story",{text:n.text,media_url:s,widget_link:n.widgetLink}),{...t,requires:"web_app_share_to_story",returns:"either"})}const Da=Oa(f(k(),H,x));_(Da);const wt=De(!1);function Ua({isInlineMode:e,postEvent:t,...s}){return T((n,i)=>t("web_app_switch_inline_query",{query:n,chat_types:i||[]}),{...s,requires:{every:["web_app_switch_inline_query",()=>J(e)?void 0:"The application must be launched in the inline mode"]},returns:"either"})}const Ga=Ua({...f(k(),H,x),isInlineMode:wt});_(Ga);class Wa{constructor({storage:t,isPageReload:s,onContentSafeAreaInsetsChanged:n,onSafeAreaInsetsChanged:i,onViewportChanged:r,onFullscreenChanged:a,offContentSafeAreaInsetsChanged:u,offFullscreenChanged:l,offSafeAreaInsetsChanged:c,offViewportChanged:h,request:p,isViewportStable:b,isFullscreen:g,isTma:y,version:S,postEvent:m}){o(this,"state"),o(this,"height"),o(this,"stableHeight"),o(this,"width"),o(this,"isExpanded"),o(this,"isStable",C(()=>this.height()===this.stableHeight())),o(this,"contentSafeAreaInsets"),o(this,"contentSafeAreaInsetTop"),o(this,"contentSafeAreaInsetLeft"),o(this,"contentSafeAreaInsetRight"),o(this,"contentSafeAreaInsetBottom"),o(this,"safeAreaInsets"),o(this,"safeAreaInsetTop"),o(this,"safeAreaInsetLeft"),o(this,"safeAreaInsetRight"),o(this,"safeAreaInsetBottom"),o(this,"isFullscreen"),o(this,"requestFullscreenFp"),o(this,"requestFullscreen"),o(this,"exitFullscreenFp"),o(this,"exitFullscreen"),o(this,"isCssVarsBound"),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"expandFp"),o(this,"expand");const v={top:0,right:0,left:0,bottom:0},d=new pe({initialState:{contentSafeAreaInsets:v,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:v,stableHeight:0,width:0},onChange:t.set}),I=E=>{d.setState({isExpanded:E.is_expanded,height:E.height,width:E.width,stableHeight:E.is_state_stable?E.height:void 0})},P=E=>{d.setState({isFullscreen:E.is_fullscreen})},R=E=>{d.setState({safeAreaInsets:E})},F=E=>{d.setState({contentSafeAreaInsets:E})},M=new Jt({initialState(E){const de=ie=>()=>{const[ue,X]=ie==="safe-area"?["web_app_request_safe_area","safe_area_changed"]:["web_app_request_content_safe_area","content_safe_area_changed"];return ke(ue,J(S))?p(ue,X,E):L({top:0,left:0,right:0,bottom:0})},O=ie=>()=>typeof ie=="boolean"?L(ie):_n(ie());return f(Ao,We("safeAreaInsets",de("safe-area")),We("contentSafeAreaInsets",de("content-safe-area")),We("isFullscreen",O(g)),We("isViewportStable",O(b)),$e(({isViewportStable:ie,...ue})=>ie?L({...ue,height:window.innerHeight,isExpanded:!0,stableHeight:window.innerHeight,width:window.innerWidth}):f(p("web_app_request_viewport","viewport_changed",E),B(X=>({...ue,height:X.height,isExpanded:X.is_expanded,stableHeight:X.is_state_stable?X.height:0,width:X.width})))))},isPageReload:s,onMounted(E){r(I),a(P),i(R),n(F),d.setState(E)},onUnmounted(){h(I),l(P),c(R),u(F)},restoreState:t.get}),A=E=>C(()=>this.safeAreaInsets()[E]),j=E=>C(()=>this.contentSafeAreaInsets()[E]);this.state=d.state,this.height=d.getter("height"),this.stableHeight=d.getter("stableHeight"),this.width=d.getter("width"),this.isExpanded=d.getter("isExpanded"),this.safeAreaInsets=d.getter("safeAreaInsets"),this.safeAreaInsetTop=A("top"),this.safeAreaInsetBottom=A("bottom"),this.safeAreaInsetLeft=A("left"),this.safeAreaInsetRight=A("right"),this.contentSafeAreaInsets=d.getter("contentSafeAreaInsets"),this.contentSafeAreaInsetTop=j("top"),this.contentSafeAreaInsetBottom=j("bottom"),this.contentSafeAreaInsetLeft=j("left"),this.contentSafeAreaInsetRight=j("right");const ye=q({isTma:y,returns:"task"}),xe=q({isTma:y,returns:"either"}),Fn=q({isTma:y,requires:"web_app_request_fullscreen",version:S,returns:"task"}),Xt=E=>Fn(de=>f(p(E?"web_app_request_fullscreen":"web_app_exit_fullscreen",["fullscreen_changed","fullscreen_failed"],de),ae(O=>"error"in O&&O.error!=="ALREADY_FULLSCREEN"?N(new Mo(O.error)):(d.setState({isFullscreen:"is_fullscreen"in O?O.is_fullscreen:!0}),L(void 0)))));this.isMounted=M.isMounted,this.mountFp=ye(M.mount),this.mount=_(this.mountFp),this.isFullscreen=d.getter("isFullscreen"),this.requestFullscreenFp=Xt(!0),this.requestFullscreen=_(this.requestFullscreenFp),this.exitFullscreenFp=Xt(!1),this.exitFullscreen=_(this.exitFullscreenFp);const Ge=U(!1);this.isCssVarsBound=C(Ge),this.bindCssVarsFp=xe(E=>{if(Ge())return D(new Ht);E||(E=O=>`--tg-viewport-${Ss(O)}`);const de=[["height",this.height],["stableHeight",this.stableHeight],["width",this.width],["safeAreaInsetTop",this.safeAreaInsetTop],["safeAreaInsetBottom",this.safeAreaInsetBottom],["safeAreaInsetLeft",this.safeAreaInsetLeft],["safeAreaInsetRight",this.safeAreaInsetRight],["contentSafeAreaInsetTop",this.contentSafeAreaInsetTop],["contentSafeAreaInsetBottom",this.contentSafeAreaInsetBottom],["contentSafeAreaInsetLeft",this.contentSafeAreaInsetLeft],["contentSafeAreaInsetRight",this.contentSafeAreaInsetRight]].reduce((O,[ie,ue])=>{const X=E(ie);if(X){const es=()=>{Qt(X,`${ue()}px`)};O.push({update:es,removeListener:ue.sub(es),cssVar:X})}return O},[]);return de.forEach(O=>{O.update()}),Ge.set(!0),V(()=>{de.forEach(O=>{O.removeListener(),Yt(O.cssVar)}),Ge.set(!1)})}),this.bindCssVars=_(this.bindCssVarsFp),this.expandFp=xe(()=>m("web_app_expand")),this.expand=_(this.expandFp)}}function Na(){const e=r=>({on:a=>{ne(r,a)},off:a=>{Me(r,a)}}),t=e("viewport_changed"),s=e("fullscreen_changed"),n=e("safe_area_changed"),i=e("content_safe_area_changed");return new Wa({...f(k(),fe("viewport"),x,H,Q),isFullscreen(){return f(qe(),K(r=>!!r.tgWebAppFullscreen))},isViewportStable(){return f(qe(),K(r=>["macos","tdesktop","unigram","webk","weba","web"].includes(r.tgWebAppPlatform)))},offContentSafeAreaInsetsChanged:i.off,offFullscreenChanged:s.off,offSafeAreaInsetsChanged:n.off,offViewportChanged:t.off,onContentSafeAreaInsetsChanged:i.on,onFullscreenChanged:s.on,onSafeAreaInsetsChanged:n.on,onViewportChanged:t.on})}const cu=Na();function Ha(e={}){const{version:t,isInlineMode:s,themeParams:n}=e;if(t&&typeof s=="boolean"&&n)gt.set(t),wt.set(s),vt.set(n);else{const u=f(qe(),hn(l=>l,l=>{gt.set(t||l.tgWebAppVersion),wt.set(typeof s=="boolean"?s:!!l.tgWebAppBotInline),vt.set(n||l.tgWebAppThemeParams)}));if(u)return D(u)}e.postEvent&&bn.set(e.postEvent);const[i,r]=Xe(ne("reload_iframe",()=>{Te().log("Received a request to reload the page"),Do("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:a=!0}=e;if(a){const u=document.createElement("style");u.id="telegram-custom-styles",document.head.appendChild(u),i(ne("set_custom_style",l=>{u.innerHTML=l}),()=>{document.head.removeChild(u)})}return f(Ue("iframe_ready",{reload_supported:!0}),K(()=>(Te().log("The package was initialized"),r)))}const lu=Y(Ha);export{_a as $,tn as A,la as B,Ro as C,Wa as D,Xo as E,ze as F,ta as G,Fa as H,Hn as I,Un as J,$a as K,gn as L,qi as M,tu as N,Si as O,Ei as P,Ht as Q,ba as R,sa as S,da as T,Aa as U,fa as V,ka as W,Io as X,at as Y,To as Z,Ai as _,lu as a,Ta as a0,fs as a1,Pa as a2,Ha as a3,Ho as a4,$r as a5,yn as a6,pa as a7,Ne as a8,kr as a9,uu as aA,Ba as aB,Mr as aC,Vr as aD,Zo as aE,ja as aF,Da as aG,ua as aH,ke as aI,Ga as aJ,Fi as aK,xr as aL,Pt as aM,Fr as aa,Sr as ab,su as ac,rn as ad,Te as ae,nu as af,Me as ag,ne as ah,ia as ai,vn as aj,Ir as ak,Pr as al,Mt as am,Do as an,Ue as ao,ou as ap,Va as aq,Sn as ar,ya as as,Ko as at,Go as au,Cn as av,Sa as aw,qe as ax,bi as ay,rt as az,au as b,mn as c,Uo as d,Mo as e,Qo as f,te as g,ru as h,cu as i,_i as j,na as k,Wo as l,mi as m,Bo as n,di as o,No as p,ha as q,Ya as r,Qa as s,Po as t,Vo as u,Je as v,xa as w,Cs as x,iu as y,zt as z};
